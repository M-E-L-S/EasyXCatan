# EasyX 多人协作项目开发文档

---

## 项目结构

```
EasyX Project/
│── src/                    # 源代码目录
│   ├── main.cpp            # 主程序入口
│   └── *.cpp                 
│── include/                # 头文件目录
│   └── *.h                 
│── resources/              # 资源文件目录
│   ├── images/             # 图片资源
│   └── sounds/             # 音频资源
├── .gitignore    
├── README.md               
└── CMakeLists.txt          
```

---

## Git 分支规范
```
main              ← 最终发布用（禁止push）
│
└─ dev            ← 开发分支（不可直接push到此分支）
    └── MainGameLoop   ← 自己随便新建分支，完成后合并到 dev 分支
```

### git操作流程

1. 克隆仓库
```bash
git clone https://github.com/M-E-L-S/EasyXCatan.git
cd EasyXCatan
```
2. 每次开发流程
```bash
git checkout dev                     # 切换到开发分支
git pull origin dev                  # 拉取最新的开发分支代码
git checkout -b YourFeatureBranch    # 创建并切换到你自己创建的功能分支
# 进行代码开发
git add .                            # 添加修改的文件
git commit -m "描述你的修改内容"        # 提交修改
git push origin YourFeatureBranch    # 推送你的本地修改到远程仓库
```
3. 创建合并请求（Pull Request）
- 登录 GitHub，回到项目的仓库页面。
- 在 "Pull requests" 选项中，点击"New pull request"
  - base 分支选择 `dev`，compare 分支选择你的功能分支。
  - 务必填写标题和详细描述这次完成的功能，之后 "Create pull request"。
- 等待approval后即可合并至 `dev` 分支。

---

## 接口需求

### 主循环注：
- 不需要你们检测鼠标键盘事件，主循环检测后会打包把数据发给你们
- 不需要管理绘图遮挡之类的问题，绘图顺序由主循环控制
- 不需要生成窗口，在指定窗口绘图。绘图大小按自己设置，但是注意加入缩放尺寸！！！
- 注意自己实现音效

### 地图组
- 地图初始化（接受随机数种子，随机地图块和港口位置）
- 玩家交易属性（接受玩家编号，返回交易属性（bool值？），如：4:1,3:1,2:1木头）
- 资源产出（接受骰子结果，返回产出资源和玩家编号，记得强盗特判；开局时按村庄获得资源特判，注意资源总量限制）
- 玩家建设（接受建设类型，玩家编号，和之后的一系列鼠标交互，返回是否成功。注意开局特判）
- 最长的道路特判（返回玩家编号）
- 强盗移动（返回落脚点玩家编号）

### 用户组
- 玩家初始化（昵称之类，返回编号）
- 资源管理（接受交易类型（枚举？），玩家编号，在玩家任何交易和购买后更新资源数，包括村庄道路数量以及发展卡）
- 资源管理（接受资源类型（枚举？），玩家编号，在资源产出时更新资源数）
- 打出发展卡（做出发展卡交互，返回打出的发展卡类型（枚举？）。注意本回合购买的发展卡不能使用，且每回合只能打出一张）
- 分数管理（接受玩家编号和成就特殊分值，自行加入村庄城市发展卡分数，做出分数显示（自身可见和全局可见），返回是否胜利）
- 资源卡数量检测（强盗和发展卡触发的特判函数，超过一定数量需要做丢弃效果，返回丢弃数量）
- 抢劫（强盗触发的特判函数，接受玩家编号双方，做出抽卡效果，并更新资源数）
- 最多的骑士特判（返回玩家编号）

### 交易组
- 玩家购买（接受资源量，做出各种购买和交互，成功后返回交易类型。注意控制资源数量限制）
- 银行交易（接受资源量，玩家交易属性，做出各种交易和交互，成功后返回资源类型）
- 玩家交易（特判，可以做类似发起需求或者发起供给之类的，并在成功后返回双方和交易资源）
- 银行交易（发展卡特判，0元购，返回资源类型）